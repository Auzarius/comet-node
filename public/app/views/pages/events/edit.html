<div ng-if="event.eventData.created_by == main.user.id || main.user.role === 'mod' || main.user.role === 'admin'">
	<div class="show-hide-message fixed" ng-show="event.message">
		<div class="row alert alert-info alert-dismissable">
			<div class='col-xs-11'>{{ event.message }}</div>
			<button type="button" class="close" ng-click="event.message = ''" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
	</div>

	<div class="page-header">
		<h1>Edit Event
			<a ng-href="/tickets/{{ event.eventData.ticket_id }}" class="btn btn-default">
				<span class="glyphicon glyphicon-chevron-left"></span> 
				Back to the Ticket
			</a>
		</h1>
		
	</div>

	<form class="form-horizontal" ng-submit="event.saveEvent()" name='eventform' novalidate>
		
		<div class="form-group">
			<label class="col-sm-2 control-label">Author</label>
			<div class="col-sm-8 disabled">
				<input type="text" name='author' class="form-control" ng-model="event.eventData.author" disabled />
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-2 control-label">Status</label>
			<div class="col-sm-8">
				<select class="form-control" ng-model="event.eventData.status" name="status" required>
					<option value='Additional Notes'>Additional Notes</option>
					<option value='Complete'>Complete</option>
					<option value='Delivered'>Delivered</option>
					<option value='Diagnosed'>Diagnosed</option>
					<option value='Non-repairable'>Non-repairable</option>
					<option value='Pending'>Pending</option>
					<option value='Repaired'>Repaired</option>
					<option value='Replaced'>Replaced</option>
					<option value='Waiting for Customer'>Waiting for Customer</option>
					<option value='Waiting for Parts'>Waiting for Parts</option>
				</select>
			</div>
		</div>
		
		<div class="form-group" ng-if="event.eventData.status == 'Diagnosed' || event.eventData.status == 'Repaired' || event.eventData.status == 'Additional Notes'">
			<label class="col-sm-2 control-label" title="Time spent in minutes">Time Spent</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" ng-model="event.eventData.timespent" name="time" required />
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-2 control-label">Comments</label>
			<div class="col-sm-8">
				<textarea type="text" class="form-control" ng-model="event.eventData.comments" name="comments" rows='8' required></textarea>
			</div>
		</div>
		
		<div class="form-group">
			<div class="col-sm-offset-2 col-sm-6">
				<button type="submit" class="btn btn-success btn-lg btn-block" ng-disabled='eventform.$invalid'>Update Event</button>
			</div>
		</div>
	</form>
</div>
<div ng-if="event.eventData.created_by != main.user.id && main.user.role !== 'mod' && main.user.role !== 'admin'" ng-include="'app/views/pages/403.html'"></div>
