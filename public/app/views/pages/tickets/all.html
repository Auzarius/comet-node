<div class="page-header">
	<h1>
		Tickets 
		<a href="/tickets/create" class="btn btn-default">
			<span class="glyphicon glyphicon-plus"></span> 
			New Ticket
		</a>
	</h1>

</div>

<div class="jumbotron text-center" ng-show="ticket.processing && !ticket.tickets">
	<span class="glyphicon glyphicon-repeat spinner"></span>
	<p>Loading Tickets...</p>
</div>

<div class="row show-hide-message" ng-show="ticket.message">
	<div class="col-sm-12">
		<div class="alert alert-info alert-dismissable">
			{{ ticket.message }}
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
	</div>
</div>

<div class="jumbotron text-center" ng-show="!ticket.processing && !ticket.tickets">
	<p>No active tickets available at this time.</p>
</div>

<table ng-cloak id="tickets" class="table table-bordered tbody-striped" ng-show="ticket.tickets">
	<thead>
		<tr>
			<th></th>
			<th>Company</th>
			<th>Status</th>
			<th>Tag #</th>	
			<th>Manufacturer</th>
			<th>Model</th>
		</tr>
	</thead>
	<tbody ng-repeat="_ticket in ticket.tickets">
			<tr>
				<td><a class='btn btn-primary btn-block' ng-href='/tickets/{{ ticket.id }}'>View Ticket</a></td>
				<td>{{ _ticket.companyname }}</td>
				<td>{{ _ticket.status }}</td>
				<td>{{ _ticket.indicator_tag }}</td>
				<td>{{ _ticket.indicator_manu }}</td>
				<td>{{ _ticket.indicator_model }}</td>
			</tr>
			<tr>
				<td>
					<div class="dropdown">
						<a class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" href="#" role="button">
							<i class="glyphicon glyphicon-edit"></i>&nbsp;&nbsp;Manage
						</a>
						<ul class="dropdown-menu" style="width: 100%;">
							<li>
								<a href="#" ng-href="/tickets/{{ _ticket.id }}/edit">
									<i class="glyphicon glyphicon-pencil"></i> Edit
								</a>
							</li>
							<li>
								<a href="#" ng-click="ticket.deleteTicket(_ticket.id)">
									<i class="glyphicon glyphicon-trash"></i> Delete
								</a>
							</li>
						</ul>
					</div>
				</td>
				<td colspan="2"><i ng-if="_ticket.updated_at && _ticket.updated_by" title="{{_ticket.created_at | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}">Created: {{ _ticket.created_at | amTimeAgo }} by {{ _ticket.created_by }}</i></td>
				<td colspan="3"><i ng-if="_ticket.updated_at && _ticket.updated_by" title="{{_ticket.updated_at | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}">Updated: {{ _ticket.updated_at | amTimeAgo }} by {{ _ticket.updated_by }}</i></td>
			</tr>
	</tbody>
</table>
