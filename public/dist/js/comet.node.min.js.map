{"version":3,"sources":["app.js","app.routes.js","controllers/mainCtrl.js","controllers/ticketCtrl.js","controllers/userCtrl.js","services/authService.js","services/ticketService.js","services/userService.js"],"names":["angular","module","config","$httpProvider","interceptors","push","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","$rootScope","$location","Auth","vm","this","loggedIn","isLoggedIn","$on","event","location","path","getUser","then","node","user","data","$","animate","scrollTop","doLogin","processing","error","login","loginData","username","password","success","message","doLogout","logout","Ticket","active","tickets","deleteTicket","id","all","$scope","saveTicket","create","ticketData","ticketform","$setPristine","$routeParams","get","ticket_id","update","event_processing","eventForm","getTicket","ticket","err","getEvents","events","addEvent","eventData","timespent","eventform","deleteEvent","getOne","event_id","saveEvent","comments","getFeedback","feedback","addComment","feedbackData","commentform","deleteComment","fb_id","saveComment","User","users","deleteUser","type","userData","saveUser","userform","user_id","self","factory","$http","$q","AuthToken","authFactory","post","setToken","token","getToken","cache","reject","$window","authTokenFactory","localStorage","getItem","setItem","removeItem","interceptorFactory","request","headers","responseError","response","status","ticketFactory","put","ticketId","eventId","delete","feedbackId","userFactory"],"mappings":"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","file":"comet.node.min.js","sourcesContent":["angular.module('comet', \r\n               [\r\n          \t\t'app.routes',\r\n                    'ngAnimate',\r\n          \t\t'authService',\r\n          \t\t'mainCtrl',\r\n          \t\t'userCtrl',\r\n          \t\t'userService',\r\n                    'ticketCtrl',\r\n                    'ticketService'\r\n          \t])\r\n\t// application configuration to integrate token into requests\r\n\t.config(function($httpProvider) {\r\n\r\n\t\t// attach our auth interceptor to the http requests\r\n\t\t$httpProvider.interceptors.push('AuthInterceptor');\r\n\r\n\t});\r\n","// inject ngRoute for all our routing needs\r\nangular.module('app.routes', ['ngRoute'])\r\n\t// configure our routes\r\n\t.config(function ($routeProvider, $locationProvider) {\r\n\t\t$routeProvider\r\n\r\n\t\t\t.when('/', {\r\n\t\t\t\ttemplateUrl: './views/pages/home.html'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/signin', {\r\n\t\t\t\ttemplateUrl : './views/pages/login.html',\r\n\t\t\t\tcontroller  : 'mainController',\r\n\t\t\t\tcontrollerAs: 'login'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/feedback', {\r\n\t\t\t\ttemplateUrl : './views/pages/feedback/all.html',\r\n\t\t\t\tcontroller  : 'feedbackController',\r\n\t\t\t\tcontrollerAs: 'feedback'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/feedback/:fb_id/edit', {\r\n\t\t\t\ttemplateUrl : './views/pages/feedback/edit.html',\r\n\t\t\t\tcontroller  : 'feedbackEditController',\r\n\t\t\t\tcontrollerAs: 'feedback'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t// backup 403 display if the server throws the 403 status code\r\n\t\t\t.when('/forbidden', {\r\n\t\t\t\ttemplateUrl : './views/pages/403.html'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/users', {\r\n\t\t\t\ttemplateUrl : './views/pages/users/all.html',\r\n\t\t\t\tcontroller  : 'userController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/users/create', {\r\n\t\t\t\ttemplateUrl : './views/pages/users/create.html',\r\n\t\t\t\tcontroller  : 'userCreateController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/users/:user_id', {\r\n\t\t\t\ttemplateUrl : './views/pages/users/edit.html',\r\n\t\t\t\tcontroller  : 'userEditController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/profile', {\r\n\t\t\t\ttemplateUrl : './views/pages/profile.html',\r\n\t\t\t\tcontroller  : 'userProfileController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/all.html',\r\n\t\t\t\tcontroller  : 'ticketController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets/all', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/all.html',\r\n\t\t\t\tcontroller  : 'ticketAllController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/tickets/create', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/create.html',\r\n\t\t\t\tcontroller  : 'ticketCreateController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/tickets/:ticket_id/edit', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/edit.html',\r\n\t\t\t\tcontroller  : 'ticketEditController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets/:ticket_id', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/single.html',\r\n\t\t\t\tcontroller  : 'ticketViewController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/events/:event_id/edit', {\r\n\t\t\t\ttemplateUrl : './views/pages/events/edit.html',\r\n\t\t\t\tcontroller  : 'eventEditController',\r\n\t\t\t\tcontrollerAs: 'event'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.otherwise({\r\n\t\t\t\tredirectTo: '/'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// set our app up to have pretty URLS\r\n\t\t\t$locationProvider.html5Mode(true);\r\n\t});\r\n\t","angular.module('mainCtrl', ['angularMoment'])\r\n\r\n.controller('mainController', function($rootScope, $location, Auth) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// get info if a person is logged in\r\n\tvm.loggedIn = Auth.isLoggedIn();\r\n\t\r\n\t\r\n\t// check to see if a user is logged in on every request\r\n\t$rootScope.$on('$routeChangeStart', function(event) {\r\n\t\tvm.loggedIn = Auth.isLoggedIn();\t\r\n\t\t\r\n\t\tif (vm.loggedIn) {\r\n\t\t\tvm.location = $location.path();\r\n\t\t\tAuth.getUser()\r\n\t\t\t.then(function(node) {\r\n\t\t\t\tvm.user = node.data\r\n\t\t\t});\t\r\n\t\t\t\r\n\t\t\tif ( $location.path() == '/signin' ) {\r\n\t\t\t\t$location.path('/');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else if ( $location.path() == '/' || $location.path() == '/signin' ) {\r\n\t\t\t// do nothing;\r\n\t\t} else {\r\n\t\t\t$location.path('/signin');\r\n\t\t}\r\n\t\t// get user information on page load\r\n\t\t\r\n\t});\r\n\t\r\n\t// resets the view to the top of the page when a new route loads\r\n\t// this prevents the view focus from staying the same from page to page\r\n\t$rootScope.$on('$routeChangeSuccess',function() { \r\n\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t});\r\n\r\n\t// function to handle login form\r\n\tvm.doLogin = function() {\r\n\t\tvm.processing = true;\r\n\r\n\t\t// clear the error\r\n\t\tvm.error = '';\r\n\r\n\t\tAuth.login(vm.loginData.username, vm.loginData.password)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvm.user = vm.loginData.username;\r\n\t\t\t\t\r\n\t\t\t\t// if a user successfully logs in, redirect to tickets page\r\n\t\t\t\tif (data.success)\t\t\t\r\n\t\t\t\t\t$location.path('/');\r\n\t\t\t\telse \r\n\t\t\t\t\tvm.error = data.message;\r\n\t\t\t\t\r\n\t\t\t});\r\n\t};\r\n\r\n\t// function to handle logging out\r\n\tvm.doLogout = function() {\r\n\t\tAuth.logout();\r\n\t\tvm.user = null;\r\n\t\t\r\n\t\t$location.path('/signin');\r\n\t};\r\n\r\n});","angular.module('ticketCtrl', ['ticketService'])\r\n\r\n.controller('ticketController', function(Ticket) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// set a processing variable to show loading things\r\n\tvm.processing = true;\r\n\r\n\t// grab all the active tickets at page load\r\n\tTicket.active()\r\n\t\t.success(function(node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null ) {\r\n\t\t\t\tvm.tickets = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.tickets = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(node) {\r\n\t\t\tif (node) {\r\n\t\t\t\tvm.message = node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.tickets = null;\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\r\n\t// function to delete a ticket\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\tTicket.active()\r\n\t\t\t\t\t\t.success(function(node) {\r\n\t\t\t\t\t\t\tvm.tickets = node.data;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n\r\n.controller('ticketAllController', function(Ticket) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// set a processing variable to show loading things\r\n\tvm.processing = true;\r\n\r\n\t// grab all the active tickets at page load\r\n\tTicket.all()\r\n\t\t.success(function(node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null) {\r\n\t\t\t\tvm.tickets = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.tickets = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\r\n\t// function to delete a ticket\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\tTicket.all()\r\n\t\t\t\t\t\t.success(function(node) {\r\n\t\t\t\t\t\t\tvm.tickets = node.data;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n// controller applied to ticket creation page\r\n.controller('ticketCreateController', function($scope, Ticket) {\r\n\t\r\n\tvar vm = this;\r\n\r\n\t// function to create a ticket\r\n\tvm.saveTicket = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\t\t\r\n\t\t// use the create function in the ticketService\r\n\t\tTicket.create(vm.ticketData)\r\n\t\t\t.success(function(node) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = node.message;\r\n\t\t\t\tvm.ticketData = {};\r\n\t\t\t\t$scope.ticketform.$setPristine();\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t\t\t\r\n\t};\r\n})\r\n\r\n// controller applied to ticket edit page\r\n.controller('ticketEditController', function($routeParams, Ticket) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// get the ticket data for the ticket you want to edit\r\n\t// $routeParams is the way we grab data from the URL\r\n\tTicket.get($routeParams.ticket_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.ticketData = node.data;\r\n\t\t});\r\n\r\n\t// function to save the ticket\r\n\tvm.saveTicket = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the ticketService function to update \r\n\t\tTicket.update($routeParams.ticket_id, vm.ticketData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t};\r\n\r\n})\r\n\r\n.controller('ticketViewController', function($scope, $routeParams, $location, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.processing = true;\r\n\tvm.event_processing = true;\r\n\t$scope.eventForm = {};\r\n\t\r\n\t// get the ticket data for the ticket you want to view\r\n\t// $routeParams is the way we grab data from the URL\r\n\tvm.getTicket = function(id) {\r\n\t\tTicket.get(id)\r\n\t\t\t.success(function(node) {\r\n\t\t\t\tvm.ticket = node.data;\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t})\r\n\t\t\t.error(function(err) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = err;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tvm.getTicket($routeParams.ticket_id);\r\n\t\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\t$location.path('/tickets');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tvm.getEvents = function() {\r\n\t\tTicket.event.get($routeParams.ticket_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.events = node.data;\r\n\t\t\tvm.event_processing = false;\r\n\t\t})\r\n\t\t.error(function(err) {\r\n\t\t\tvm.event_processing = false;\r\n\t\t\tvm.message = err;\r\n\t\t});\r\n\t}\t\r\n\t\t\r\n\tvm.getEvents();\r\n\t\r\n\tvm.addEvent = function() {\r\n\t\tvm.event_processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\tTicket.event.create($routeParams.ticket_id, vm.eventData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.ticket.timespent += vm.eventData.timespent;\r\n\t\t\t\tvm.eventData = {};\r\n\t\t\t\t$scope.eventform.$setPristine();\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\tvm.getEvents();\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tvm.deleteEvent = function(id) {\r\n\t\tvm.event_processing = true;\r\n\t\t\r\n\t\tTicket.event.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tif ( data.success ) {\r\n\t\t\t\t\tvm.getEvents();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.getTicket($routeParams.ticket_id);\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t}\r\n})\r\n\r\n.controller('eventEditController', function($routeParams, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.eventData = {};\r\n\r\n\tTicket.event.getOne($routeParams.event_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.eventData = node.data;\r\n\t\t});\r\n\r\n\t// function to save the event\r\n\tvm.saveEvent = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the ticketService function to update \r\n\t\tTicket.event.update(vm.eventData.id, vm.eventData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n.controller('feedbackController', function($scope, $location, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.comments = {};\r\n\tvm.processing = true;\r\n\t\r\n\tvm.getFeedback = function() {\r\n\t\tTicket.feedback.get()\r\n\t\t.success(function(node) {\r\n\t\t\tvm.comments = node.data;\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(err) {\r\n\t\t\tvm.processing = false;\r\n\t\t\tvm.message = err;\r\n\t\t});\r\n\t};\r\n\t\t\r\n\tvm.getFeedback();\r\n\t\r\n\tvm.addComment = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\t\t\r\n\t\tTicket.feedback.create(vm.feedbackData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.feedbackData = {};\r\n\t\t\t\t$scope.commentform.$setPristine();\r\n\t\t\t\tvm.getFeedback();\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n\t\r\n\tvm.deleteComment = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.feedback.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tif ( data.success ) {\r\n\t\t\t\t\tvm.getFeedback();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n.controller('feedbackEditController', function($routeParams, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.processing = true;\r\n\tvm.feedbackData = {};\r\n\t\r\n\tTicket.feedback.getOne($routeParams.fb_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.feedbackData = node.data;\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(node) {\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\r\n\t// function to save the event\r\n\tvm.saveComment = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the ticketService function to update \r\n\t\tTicket.feedback.update(vm.feedbackData.id, vm.feedbackData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n","angular.module('userCtrl', ['userService'])\r\n\r\n.controller('userController', function(User) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// set a processing variable to show loading things\r\n\tvm.processing = true;\r\n\r\n\t// grab all the users at page load\r\n\tUser.all()\r\n\t\t.success(function (node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null ) {\r\n\t\t\t\tvm.users = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.users = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function (node) {\r\n\t\t\tif (node) {\r\n\t\t\t\tvm.message = node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.users = null;\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\r\n\t// function to delete a user\r\n\tvm.deleteUser = function(id) {\r\n\t\tvm.processing = true;\r\n\t\tvm.users = {};\r\n\t\t\r\n\t\tUser.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\t// get all users to update the table\r\n\t\t\t\t// could also return the list of users with the delete call\r\n\t\t\t\tUser.all()\r\n\t\t\t\t\t.success(function (node) {\r\n\t\t\t\t\t\tvm.processing = false;\r\n\t\t\t\t\t\tvm.users = node.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvm.message = 'The user was successfully deleted!'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t};\r\n\r\n})\r\n\r\n// controller applied to user creation page\r\n.controller('userCreateController', function($scope, User) {\r\n\t\r\n\tvar vm = this;\r\n\tvm.type = 'create';\r\n\tvm.userData = {};\r\n\r\n\t// function to create a user\r\n\tvm.saveUser = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// use the create function in the userService\r\n\t\tUser.create(vm.userData)\r\n\t\t\t.success(function (data) {\r\n\t\t\t\tvm.processing = false;\t\t\t\t\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t\r\n\t\t\t\tif (data.success) {\r\n\t\t\t\t\tvm.userData = {};\r\n\t\t\t\t\t$scope.userform.$setPristine();\r\n\t\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t};\t\r\n\r\n})\r\n\r\n// controller applied to user edit page\r\n.controller('userEditController', function($routeParams, User) {\r\n\r\n\tvar vm = this;\r\n\tvm.type = 'edit';\r\n\t\r\n\t// get the user data for the user you want to edit\r\n\t// $routeParams is the way we grab data from the URL\r\n\tUser.get($routeParams.user_id)\r\n\t\t.success(function (node) {\r\n\t\t\tvm.userData = node.data;\r\n\t\t});\r\n\r\n\t// function to save the user\r\n\tvm.saveUser = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the userService function to update \r\n\t\tUser.update($routeParams.user_id, vm.userData)\r\n\t\t\t.success(function (data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t};\r\n\r\n})\r\n\r\n// controller applied to user edit page\r\n.controller('userProfileController', function($routeParams, User) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// get the user data for the user you want to edit\r\n\t// $routeParams is the way we grab data from the URL\r\n\tUser.self()\r\n\t\t.success(function (user) {\r\n\t\t\tvm.userData = user;\r\n\t\t});\r\n\r\n\t// function to save the user\r\n\tvm.saveUser = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the userService function to update \r\n\t\tUser.update(vm.userData.id, vm.userData)\r\n\t\t\t.success(function (data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t};\r\n\r\n});\r\n\r\n","// Courtesy of Scotch.io Chris Sevilleja & Holly Lloyd\r\n// http://leanpub.com/mean-machine\r\n\r\nangular.module('authService', [])\r\n\r\n// ===================================================\r\n// auth factory to login and get information\r\n// inject $http for communicating with the API\r\n// inject $q to return promise objects\r\n// inject AuthToken to manage tokens\r\n// ===================================================\r\n.factory('Auth', function($http, $q, AuthToken) {\r\n\r\n\t// create auth factory object\r\n\tvar authFactory = {};\r\n\r\n\t// log a user in\r\n\tauthFactory.login = function(username, password) {\r\n\r\n\t\t// return the promise object and its data\r\n\t\treturn $http.post('/api/authenticate', {\r\n\t\t\tusername: username,\r\n\t\t\tpassword: password\r\n\t\t})\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tAuthToken.setToken(data.token);\r\n       \t\t\treturn data;\r\n\t\t\t});\r\n\t};\r\n\r\n\t// log a user out by clearing the token\r\n\tauthFactory.logout = function() {\r\n\t\t// clear the token\r\n\t\tAuthToken.setToken();\r\n\t};\r\n\r\n\t// check if a user is logged in\r\n\t// checks if there is a local token\r\n\tauthFactory.isLoggedIn = function() {\r\n\t\tif (AuthToken.getToken()) \r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\t\r\n\t};\r\n\r\n\t// get the logged in user\r\n\tauthFactory.getUser = function() {\r\n\t\tif (AuthToken.getToken())\r\n\t\t\treturn $http.get('/api/me', { cache: false });\r\n\t\telse\r\n\t\t\treturn $q.reject({ message: 'User has no token.' });\t\t\r\n\t};\r\n\r\n\t// return auth factory object\r\n\treturn authFactory;\r\n\r\n})\r\n\r\n// ===================================================\r\n// factory for handling tokens\r\n// inject $window to store token client-side\r\n// ===================================================\r\n.factory('AuthToken', function($window) {\r\n\r\n\tvar authTokenFactory = {};\r\n\r\n\t// get the token out of local storage\r\n\tauthTokenFactory.getToken = function() {\r\n\t\treturn $window.localStorage.getItem('token');\r\n\t};\r\n\r\n\t// function to set token or clear token\r\n\t// if a token is passed, set the token\r\n\t// if there is no token, clear it from local storage\r\n\tauthTokenFactory.setToken = function(token) {\r\n\t\tif (token)\r\n\t\t\t$window.localStorage.setItem('token', token);\r\n\t \telse\r\n\t\t\t$window.localStorage.removeItem('token');\r\n\t};\r\n\r\n\treturn authTokenFactory;\r\n\r\n})\r\n\r\n// ===================================================\r\n// application configuration to integrate token into requests\r\n// ===================================================\r\n.factory('AuthInterceptor', function($q, $location, AuthToken) {\r\n\r\n\tvar interceptorFactory = {};\r\n\r\n\t// this will happen on all HTTP requests\r\n\tinterceptorFactory.request = function(config) {\r\n\r\n\t\t// grab the token\r\n\t\tvar token = AuthToken.getToken();\r\n\r\n\t\t// if the token exists, add it to the header as x-access-token\r\n\t\tif (token) \r\n\t\t\tconfig.headers['x-access-token'] = token;\r\n\t\t\r\n\t\treturn config;\r\n\t};\r\n\r\n\t// happens on response errors\r\n\tinterceptorFactory.responseError = function(response) {\r\n\r\n\t\t// if our server returns a 403 forbidden response\r\n\t\tif (response.status == 401) {\r\n\t\t\tAuthToken.setToken();\r\n\t\t\t$location.path('/signin');\r\n\t\t} else if (response.status == 403) {\r\n\t\t\t$location.path('/forbidden');\r\n\t\t}\r\n\r\n\t\t// return the errors from the server as a promise\r\n\t\treturn $q.reject(response);\r\n\t};\r\n\r\n\treturn interceptorFactory;\r\n\t\r\n});","angular.module('ticketService', [])\r\n\r\n.factory('Ticket', function($http) {\r\n\r\n\t// create a new object\r\n\tvar ticketFactory = {};\r\n\r\n\t// get a single ticket\r\n\tticketFactory.get = function(id) {\r\n\t\treturn $http.get('/api/tickets/' + id);\r\n\t};\r\n\r\n\t// get all ticket\r\n\tticketFactory.active = function() {\r\n\t\treturn $http.get('/api/tickets');\r\n\t};\r\n\t\r\n\tticketFactory.all = function() {\r\n\t\treturn $http.get('/api/tickets/all');\r\n\t};\r\n\r\n\t// create a ticket\r\n\tticketFactory.create = function(ticketData) {\r\n\t\treturn $http.post('/api/tickets/', ticketData);\r\n\t};\r\n\r\n\t// update a ticket\r\n\tticketFactory.update = function(id, ticketData) {\r\n\t\treturn $http.put('/api/tickets/' + id, ticketData);\r\n\t};\r\n\r\n\t// delete a ticket\r\n\tticketFactory.delete = function(id) {\r\n\t\treturn $http.delete('/api/tickets/' + id);\r\n\t};\r\n\t\r\n\tticketFactory.event = {\r\n\t\tget : function(ticketId) {\r\n\t\t\treturn $http.get('/api/tickets/' + ticketId + '/events');\r\n\t\t},\r\n\t\t\r\n\t\tgetOne : function (eventId) {\r\n\t\t\treturn $http.get('/api/events/' + eventId);\r\n\t\t},\r\n\t\t\r\n\t\tcreate : function(ticketId, eventData) {\r\n\t\t\treturn $http.post('/api/tickets/' + ticketId + '/events', eventData);\r\n\t\t},\r\n\t\t\r\n\t\tupdate : function(eventId, eventData) {\r\n\t\t\treturn $http.put('/api/events/' + eventId, eventData);\r\n\t\t},\r\n\t\t\r\n\t\tdelete : function(eventId) {\r\n\t\t\treturn $http.delete('/api/events/' + eventId)\r\n\t\t}\r\n\t};\r\n\t\r\n\tticketFactory.feedback = {\r\n\t\tget : function () {\r\n\t\t\treturn $http.get('/api/feedback/');\r\n\t\t},\r\n\t\t\r\n\t\tgetOne : function (feedbackId) {\r\n\t\t\treturn $http.get('/api/feedback/' + feedbackId);\r\n\t\t},\r\n\t\t\r\n\t\tcreate : function (feedbackData) {\r\n\t\t\treturn $http.post('/api/feedback/', feedbackData);\r\n\t\t},\r\n\t\t\r\n\t\tupdate : function (feedbackId, feedbackData) {\r\n\t\t\treturn $http.put('/api/feedback/' + feedbackId, feedbackData);\r\n\t\t},\r\n\t\t\r\n\t\tdelete : function (feedbackId) {\r\n\t\t\treturn $http.delete('/api/feedback/' + feedbackId)\r\n\t\t}\r\n\t};\r\n\r\n\t// return our entire ticketFactory object\r\n\treturn ticketFactory;\r\n\r\n});","angular.module('userService', [])\r\n\r\n.factory('User', function($http) {\r\n\r\n\t// create a new object\r\n\tvar userFactory = {};\r\n\r\n\t// get a single user\r\n\tuserFactory.get = function(id) {\r\n\t\treturn $http.get('/api/users/' + id);\r\n\t};\r\n\t\r\n\t// get self\r\n\tuserFactory.self = function() {\r\n\t\treturn $http.get('/api/me');\r\n\t};\r\n\r\n\t// get all users\r\n\tuserFactory.all = function() {\r\n\t\treturn $http.get('/api/users/');\r\n\t};\r\n\r\n\t// create a user\r\n\tuserFactory.create = function(userData) {\r\n\t\treturn $http.post('/api/users/', userData);\r\n\t};\r\n\r\n\t// update a user\r\n\tuserFactory.update = function(id, userData) {\r\n\t\treturn $http.put('/api/users/' + id, userData);\r\n\t};\r\n\r\n\t// delete a user\r\n\tuserFactory.delete = function(id) {\r\n\t\treturn $http.delete('/api/users/' + id);\r\n\t};\r\n\r\n\t// return our entire userFactory object\r\n\treturn userFactory;\r\n\r\n});"],"sourceRoot":"/source/"}