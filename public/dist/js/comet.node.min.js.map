{"version":3,"sources":["app.js","app.routes.js","services/authService.js","services/customerService.js","services/ticketService.js","services/userService.js","controllers/mainCtrl.js","controllers/ticketCtrl.js","controllers/userCtrl.js"],"names":["angular","module","config","$httpProvider","interceptors","push","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","factory","$http","$q","AuthToken","authFactory","login","username","password","post","success","data","setToken","token","logout","isLoggedIn","getToken","getUser","get","cache","reject","message","$window","authTokenFactory","localStorage","getItem","setItem","removeItem","$location","interceptorFactory","request","headers","responseError","response","status","path","customerService","id","getList","filterList","source","i","len","length","ticketFactory","active","all","recent","create","ticketData","update","put","event","ticketId","getOne","eventId","eventData","delete","feedback","feedbackId","feedbackData","userFactory","self","userData","$rootScope","Auth","vm","this","loggedIn","$on","location","then","node","user","$","animate","scrollTop","doLogin","processing","error","loginData","doLogout","$scope","Ticket","simpleSearch","toggleAdvanced","searchBox","advancedForm","$setPristine","tickets","deleteTicket","Customer","saveTicket","ticketform","getCustomerList","customerList","console","log","getCustomerById","result","customer","street","city","state","zipcode","$routeParams","ticket_id","event_processing","eventForm","getTicket","ticket","err","getEvents","events","addEvent","timespent","eventform","deleteEvent","event_id","saveEvent","comments","getFeedback","addComment","commentform","deleteComment","fb_id","saveComment","User","users","deleteUser","type","saveUser","userform","user_id"],"mappings":"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","file":"comet.node.min.js","sourcesContent":["angular.module('comet', \r\n               [\r\n                    'app.routes',\r\n                    'ngAnimate',\r\n                    'authService',\r\n                    'mainCtrl',\r\n                    'userCtrl',\r\n                    'userService',\r\n                    'ticketCtrl',\r\n                    'ticketService',\r\n                    'customerService'\r\n               ])\r\n     // application configuration to integrate token into requests\r\n     .config(function($httpProvider) {\r\n\r\n          // attach our auth interceptor to the http requests\r\n          $httpProvider.interceptors.push('AuthInterceptor');\r\n\r\n     });\r\n","// inject ngRoute for all our routing needs\r\nangular.module('app.routes', ['ngRoute'])\r\n\t// configure our routes\r\n\t.config(function ($routeProvider, $locationProvider) {\r\n\t\t$routeProvider\r\n\r\n\t\t\t.when('/', {\r\n\t\t\t\ttemplateUrl : './views/pages/home.html'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/signin', {\r\n\t\t\t\ttemplateUrl : './views/pages/login.html',\r\n\t\t\t\tcontroller  : 'mainController',\r\n\t\t\t\tcontrollerAs: 'login'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/feedback', {\r\n\t\t\t\ttemplateUrl : './views/pages/feedback/all.html',\r\n\t\t\t\tcontroller  : 'feedbackController',\r\n\t\t\t\tcontrollerAs: 'feedback'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/feedback/:fb_id/edit', {\r\n\t\t\t\ttemplateUrl : './views/pages/feedback/edit.html',\r\n\t\t\t\tcontroller  : 'feedbackEditController',\r\n\t\t\t\tcontrollerAs: 'feedback'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t// backup 403 display if the server throws the 403 status code\r\n\t\t\t.when('/forbidden', {\r\n\t\t\t\ttemplateUrl : './views/pages/403.html'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/users', {\r\n\t\t\t\ttemplateUrl : './views/pages/users/all.html',\r\n\t\t\t\tcontroller  : 'userController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/users/create', {\r\n\t\t\t\ttemplateUrl : './views/pages/users/create.html',\r\n\t\t\t\tcontroller  : 'userCreateController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/users/:user_id', {\r\n\t\t\t\ttemplateUrl : './views/pages/users/edit.html',\r\n\t\t\t\tcontroller  : 'userEditController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/profile', {\r\n\t\t\t\ttemplateUrl : './views/pages/profile.html',\r\n\t\t\t\tcontroller  : 'userProfileController',\r\n\t\t\t\tcontrollerAs: 'user'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/all.html',\r\n\t\t\t\tcontroller  : 'ticketController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets/all', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/all.html',\r\n\t\t\t\tcontroller  : 'ticketAllController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets/recent', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/recent.html',\r\n\t\t\t\tcontroller  : 'ticketRecentController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/tickets/create', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/create.html',\r\n\t\t\t\tcontroller  : 'ticketCreateController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\r\n\t\t\t.when('/tickets/:ticket_id/edit', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/edit.html',\r\n\t\t\t\tcontroller  : 'ticketEditController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/tickets/:ticket_id', {\r\n\t\t\t\ttemplateUrl : './views/pages/tickets/single.html',\r\n\t\t\t\tcontroller  : 'ticketViewController',\r\n\t\t\t\tcontrollerAs: 'ticket'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.when('/events/:event_id/edit', {\r\n\t\t\t\ttemplateUrl : './views/pages/events/edit.html',\r\n\t\t\t\tcontroller  : 'eventEditController',\r\n\t\t\t\tcontrollerAs: 'event'\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t.otherwise({\r\n\t\t\t\tredirectTo: '/'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// set our app up to have pretty URLS\r\n\t\t\t$locationProvider.html5Mode(true);\r\n\t});\r\n\t","// Courtesy of Scotch.io Chris Sevilleja & Holly Lloyd\r\n// http://leanpub.com/mean-machine\r\n\r\nangular.module('authService', [])\r\n\r\n// ===================================================\r\n// auth factory to login and get information\r\n// inject $http for communicating with the API\r\n// inject $q to return promise objects\r\n// inject AuthToken to manage tokens\r\n// ===================================================\r\n.factory('Auth', function($http, $q, AuthToken) {\r\n\r\n\t// create auth factory object\r\n\tvar authFactory = {};\r\n\r\n\t// log a user in\r\n\tauthFactory.login = function(username, password) {\r\n\r\n\t\t// return the promise object and its data\r\n\t\treturn $http.post('/api/authenticate', {\r\n\t\t\tusername: username,\r\n\t\t\tpassword: password\r\n\t\t})\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tAuthToken.setToken(data.token);\r\n       \t\t\treturn data;\r\n\t\t\t});\r\n\t};\r\n\r\n\t// log a user out by clearing the token\r\n\tauthFactory.logout = function() {\r\n\t\t// clear the token\r\n\t\tAuthToken.setToken();\r\n\t};\r\n\r\n\t// check if a user is logged in\r\n\t// checks if there is a local token\r\n\tauthFactory.isLoggedIn = function() {\r\n\t\tif (AuthToken.getToken()) \r\n\t\t\treturn true;\r\n\t\telse\r\n\t\t\treturn false;\t\r\n\t};\r\n\r\n\t// get the logged in user\r\n\tauthFactory.getUser = function() {\r\n\t\tif (AuthToken.getToken())\r\n\t\t\treturn $http.get('/api/me', { cache: false });\r\n\t\telse\r\n\t\t\treturn $q.reject({ message: 'User has no token.' });\t\t\r\n\t};\r\n\r\n\t// return auth factory object\r\n\treturn authFactory;\r\n\r\n})\r\n\r\n// ===================================================\r\n// factory for handling tokens\r\n// inject $window to store token client-side\r\n// ===================================================\r\n.factory('AuthToken', function($window) {\r\n\r\n\tvar authTokenFactory = {};\r\n\r\n\t// get the token out of local storage\r\n\tauthTokenFactory.getToken = function() {\r\n\t\treturn $window.localStorage.getItem('token');\r\n\t};\r\n\r\n\t// function to set token or clear token\r\n\t// if a token is passed, set the token\r\n\t// if there is no token, clear it from local storage\r\n\tauthTokenFactory.setToken = function(token) {\r\n\t\tif (token)\r\n\t\t\t$window.localStorage.setItem('token', token);\r\n\t \telse\r\n\t\t\t$window.localStorage.removeItem('token');\r\n\t};\r\n\r\n\treturn authTokenFactory;\r\n\r\n})\r\n\r\n// ===================================================\r\n// application configuration to integrate token into requests\r\n// ===================================================\r\n.factory('AuthInterceptor', function($q, $location, AuthToken) {\r\n\r\n\tvar interceptorFactory = {};\r\n\r\n\t// this will happen on all HTTP requests\r\n\tinterceptorFactory.request = function(config) {\r\n\r\n\t\t// grab the token\r\n\t\tvar token = AuthToken.getToken();\r\n\r\n\t\t// if the token exists, add it to the header as x-access-token\r\n\t\tif (token) \r\n\t\t\tconfig.headers['x-access-token'] = token;\r\n\t\t\r\n\t\treturn config;\r\n\t};\r\n\r\n\t// happens on response errors\r\n\tinterceptorFactory.responseError = function(response) {\r\n\r\n\t\t// if our server returns a 403 forbidden response\r\n\t\tif (response.status == 401) {\r\n\t\t\tAuthToken.setToken();\r\n\t\t\t$location.path('/signin');\r\n\t\t} else if (response.status == 403) {\r\n\t\t\t$location.path('/forbidden');\r\n\t\t}\r\n\r\n\t\t// return the errors from the server as a promise\r\n\t\treturn $q.reject(response);\r\n\t};\r\n\r\n\treturn interceptorFactory;\r\n\t\r\n});","angular.module('customerService', [])\r\n\r\n.factory('Customer', function($http) {\r\n\r\n\t// create a new object\r\n\tvar customerService = {};\r\n\r\n\t// get a single customers data\r\n\tcustomerService.get = function(id) {\r\n\t\treturn $http.get('/api/customers/' + id);\r\n\t};\r\n\r\n\t// get the customer list\r\n\tcustomerService.getList = function() {\r\n\t\treturn $http.get('/api/customers');\r\n\t};\r\n\t\r\n\tcustomerService.filterList = function(source, id) {\r\n\t\tfor(var i = 0, len = source.length; i < len; i++) {\r\n\t\t\tif(source[i].id == id) {\r\n\t\t\t\treturn source[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\t// return our entire customerService object\r\n\treturn customerService;\r\n\r\n});\r\n","angular.module('ticketService', [])\r\n\r\n.factory('Ticket', function($http) {\r\n\r\n\t// create a new object\r\n\tvar ticketFactory = {};\r\n\r\n\t// get a single ticket\r\n\tticketFactory.get = function(id) {\r\n\t\treturn $http.get('/api/tickets/' + id);\r\n\t};\r\n\r\n\t// get all ticket\r\n\tticketFactory.active = function() {\r\n\t\treturn $http.get('/api/tickets');\r\n\t};\r\n\t\r\n\tticketFactory.all = function() {\r\n\t\treturn $http.get('/api/tickets/all');\r\n\t};\r\n\t\r\n\tticketFactory.recent = function() {\r\n\t\treturn $http.get('/api/tickets/recent');\r\n\t};\r\n\r\n\t// create a ticket\r\n\tticketFactory.create = function(ticketData) {\r\n\t\treturn $http.post('/api/tickets/', ticketData);\r\n\t};\r\n\r\n\t// update a ticket\r\n\tticketFactory.update = function(id, ticketData) {\r\n\t\treturn $http.put('/api/tickets/' + id, ticketData);\r\n\t};\r\n\r\n\t// delete a ticket\r\n\tticketFactory.delete = function(id) {\r\n\t\treturn $http.delete('/api/tickets/' + id);\r\n\t};\r\n\t\r\n\tticketFactory.event = {\r\n\t\tget : function(ticketId) {\r\n\t\t\treturn $http.get('/api/tickets/' + ticketId + '/events');\r\n\t\t},\r\n\t\t\r\n\t\tgetOne : function (eventId) {\r\n\t\t\treturn $http.get('/api/events/' + eventId);\r\n\t\t},\r\n\t\t\r\n\t\tcreate : function(ticketId, eventData) {\r\n\t\t\treturn $http.post('/api/tickets/' + ticketId + '/events', eventData);\r\n\t\t},\r\n\t\t\r\n\t\tupdate : function(eventId, eventData) {\r\n\t\t\treturn $http.put('/api/events/' + eventId, eventData);\r\n\t\t},\r\n\t\t\r\n\t\tdelete : function(eventId) {\r\n\t\t\treturn $http.delete('/api/events/' + eventId)\r\n\t\t}\r\n\t};\r\n\t\r\n\tticketFactory.feedback = {\r\n\t\tget : function () {\r\n\t\t\treturn $http.get('/api/feedback/');\r\n\t\t},\r\n\t\t\r\n\t\tgetOne : function (feedbackId) {\r\n\t\t\treturn $http.get('/api/feedback/' + feedbackId);\r\n\t\t},\r\n\t\t\r\n\t\tcreate : function (feedbackData) {\r\n\t\t\treturn $http.post('/api/feedback/', feedbackData);\r\n\t\t},\r\n\t\t\r\n\t\tupdate : function (feedbackId, feedbackData) {\r\n\t\t\treturn $http.put('/api/feedback/' + feedbackId, feedbackData);\r\n\t\t},\r\n\t\t\r\n\t\tdelete : function (feedbackId) {\r\n\t\t\treturn $http.delete('/api/feedback/' + feedbackId)\r\n\t\t}\r\n\t};\r\n\r\n\t// return our entire ticketFactory object\r\n\treturn ticketFactory;\r\n\r\n});","angular.module('userService', [])\r\n\r\n.factory('User', function($http) {\r\n\r\n\t// create a new object\r\n\tvar userFactory = {};\r\n\r\n\t// get a single user\r\n\tuserFactory.get = function(id) {\r\n\t\treturn $http.get('/api/users/' + id);\r\n\t};\r\n\t\r\n\t// get self\r\n\tuserFactory.self = function() {\r\n\t\treturn $http.get('/api/me');\r\n\t};\r\n\r\n\t// get all users\r\n\tuserFactory.all = function() {\r\n\t\treturn $http.get('/api/users/');\r\n\t};\r\n\r\n\t// create a user\r\n\tuserFactory.create = function(userData) {\r\n\t\treturn $http.post('/api/users/', userData);\r\n\t};\r\n\r\n\t// update a user\r\n\tuserFactory.update = function(id, userData) {\r\n\t\treturn $http.put('/api/users/' + id, userData);\r\n\t};\r\n\r\n\t// delete a user\r\n\tuserFactory.delete = function(id) {\r\n\t\treturn $http.delete('/api/users/' + id);\r\n\t};\r\n\r\n\t// return our entire userFactory object\r\n\treturn userFactory;\r\n\r\n});","angular.module('mainCtrl', ['angularMoment'])\r\n\r\n.controller('mainController', function($rootScope, $location, Auth) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// get info if a person is logged in\r\n\tvm.loggedIn = Auth.isLoggedIn();\r\n\t\r\n\t\r\n\t// check to see if a user is logged in on every request\r\n\t$rootScope.$on('$routeChangeStart', function(event) {\r\n\t\tvm.loggedIn = Auth.isLoggedIn();\t\r\n\t\t\r\n\t\tif (vm.loggedIn) {\r\n\t\t\tvm.location = $location.path();\r\n\t\t\tAuth.getUser()\r\n\t\t\t.then(function(node) {\r\n\t\t\t\tvm.user = node.data\r\n\t\t\t});\t\r\n\t\t\t\r\n\t\t\tif ( $location.path() == '/signin' ) {\r\n\t\t\t\t$location.path('/');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else if ( $location.path() == '/' || $location.path() == '/signin' ) {\r\n\t\t\t// do nothing;\r\n\t\t} else {\r\n\t\t\t$location.path('/signin');\r\n\t\t}\r\n\t\t// get user information on page load\r\n\t\t\r\n\t});\r\n\t\r\n\t// resets the view to the top of the page when a new route loads\r\n\t// this prevents the view focus from staying the same from page to page\r\n\t$rootScope.$on('$routeChangeSuccess',function() { \r\n\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t});\r\n\r\n\t// function to handle login form\r\n\tvm.doLogin = function() {\r\n\t\tvm.processing = true;\r\n\r\n\t\t// clear the error\r\n\t\tvm.error = '';\r\n\r\n\t\tAuth.login(vm.loginData.username, vm.loginData.password)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvm.user = vm.loginData.username;\r\n\t\t\t\t\r\n\t\t\t\t// if a user successfully logs in, redirect to tickets page\r\n\t\t\t\tif (data.success)\t\t\t\r\n\t\t\t\t\t$location.path('/');\r\n\t\t\t\telse \r\n\t\t\t\t\tvm.error = data.message;\r\n\t\t\t\t\r\n\t\t\t});\r\n\t};\r\n\r\n\t// function to handle logging out\r\n\tvm.doLogout = function() {\r\n\t\tAuth.logout();\r\n\t\tvm.user = null;\r\n\t\t\r\n\t\t$location.path('/signin');\r\n\t};\r\n\r\n});","angular.module('ticketCtrl', ['ticketService', 'customerService'])\r\n\r\n.controller('ticketController', function($scope, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.simpleSearch = true;\r\n\t// set a processing variable to show loading things\r\n\tvm.processing = true;\r\n\t\r\n\tvm.toggleAdvanced = function() {\r\n\t\t$scope.searchBox = null;\r\n\t\t$scope.advancedForm.$setPristine();\r\n\t\tvm.simpleSearch = !vm.simpleSearch;\r\n\t}\r\n\t\t\r\n\t// grab all the active tickets at page load\r\n\tTicket.active()\r\n\t\t.success(function(node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null ) {\r\n\t\t\t\tvm.tickets = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.tickets = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(node) {\r\n\t\t\tif (node) {\r\n\t\t\t\tvm.message = node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.tickets = null;\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\t\r\n\t// function to delete a ticket\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\tTicket.active()\r\n\t\t\t\t\t\t.success(function(node) {\r\n\t\t\t\t\t\t\tvm.tickets = node.data;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n.controller('ticketRecentController', function($scope, Ticket) {\r\n\tvar vm = this;\r\n\tvm.processing = true;\r\n\tvm.simpleSearch = true;\r\n\t\r\n\tvm.toggleAdvanced = function() {\r\n\t\t$scope.searchBox = null;\r\n\t\t$scope.advancedForm.$setPristine();\r\n\t\tvm.simpleSearch = !vm.simpleSearch;\r\n\t}\r\n\t\r\n\tTicket.recent()\r\n\t\t.success(function(node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null ) {\r\n\t\t\t\tvm.tickets = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.tickets = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(node) {\r\n\t\t\tif (node) {\r\n\t\t\t\tvm.message = node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.tickets = null;\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\t\t\r\n\t// function to delete a ticket\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\tTicket.recent()\r\n\t\t\t\t\t\t.success(function(node) {\r\n\t\t\t\t\t\t\tvm.tickets = node.data;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n.controller('ticketAllController', function($scope, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.simpleSearch = true;\r\n\t// set a processing variable to show loading things\r\n\tvm.processing = true;\r\n\t\r\n\tvm.toggleAdvanced = function() {\r\n\t\t$scope.searchBox = null;\r\n\t\t$scope.advancedForm.$setPristine();\r\n\t\tvm.simpleSearch = !vm.simpleSearch;\r\n\t}\r\n\t\r\n\t// grab all the active tickets at page load\r\n\tTicket.all()\r\n\t\t.success(function(node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null) {\r\n\t\t\t\tvm.tickets = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.tickets = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\r\n\t// function to delete a ticket\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\tTicket.all()\r\n\t\t\t\t\t\t.success(function(node) {\r\n\t\t\t\t\t\t\tvm.tickets = node.data;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n// controller applied to ticket creation page\r\n.controller('ticketCreateController', function($scope, Ticket, Customer) {\r\n\t\r\n\tvar vm = this;\r\n\tvm.ticketData = {};\r\n\r\n\t// function to create a ticket\r\n\tvm.saveTicket = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\t\t\r\n\t\t// use the create function in the ticketService\r\n\t\tTicket.create(vm.ticketData)\r\n\t\t\t.success(function(node) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = node.message;\r\n\t\t\t\tvm.ticketData = {};\r\n\t\t\t\t$scope.ticketform.$setPristine();\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t\t\t\r\n\t};\r\n\t\r\n\tvm.getCustomerList = function() {\r\n\t\tCustomer.getList()\r\n\t\t\t.success(function(node) {\r\n\t\t\t\tvm.customerList = node.data;\r\n\t\t\t})\r\n\t\t\t.error(function(node) {\r\n\t\t\t\tconsole.log(\"Message\", node.message);\r\n\t\t\t\tvm.customerList = ['--'];\r\n\t\t\t});\r\n\t};\r\n\t\r\n\t/*\r\n\tvm.getCustomerById = function(id) {\r\n\t\tCustomer.get(id)\r\n\t\t\t.success(function(node) {\r\n\t\t\t\tvm.ticketData.customer = node.data.customer;\r\n\t\t\t\tvm.ticketData.street = node.data.street;\r\n\t\t\t\tvm.ticketData.city = node.data.city;\r\n\t\t\t\tvm.ticketData.state = node.data.state;\r\n\t\t\t\tvm.ticketData.zipcode = node.data.zipcode;\r\n\t\t\t})\r\n\t\t\t.error(function(node) {\r\n\t\t\t\tconsole.log(\"Message\", node.message);\r\n\t\t\t\tvm.ticketData.customer = '--';\r\n\t\t\t});\r\n\t};*/\r\n\t\r\n\tvm.getCustomerById = function(id) {\r\n\t\tvar result = Customer.filterList(vm.customerList, id);\r\n\t\tvm.ticketData.customer = result.customer;\r\n\t\tvm.ticketData.street = result.street;\r\n\t\tvm.ticketData.city = result.city;\r\n\t\tvm.ticketData.state = result.state;\r\n\t\tvm.ticketData.zipcode = result.zipcode;\r\n\t};\r\n\t\r\n\tvm.getCustomerList();\r\n})\r\n\r\n// controller applied to ticket edit page\r\n.controller('ticketEditController', function($routeParams, Ticket) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// get the ticket data for the ticket you want to edit\r\n\t// $routeParams is the way we grab data from the URL\r\n\tTicket.get($routeParams.ticket_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.ticketData = node.data;\r\n\t\t});\r\n\r\n\t// function to save the ticket\r\n\tvm.saveTicket = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the ticketService function to update \r\n\t\tTicket.update($routeParams.ticket_id, vm.ticketData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t};\r\n\r\n})\r\n\r\n.controller('ticketViewController', function($scope, $routeParams, $location, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.processing = true;\r\n\tvm.event_processing = true;\r\n\t$scope.eventForm = {};\r\n\t\r\n\t// get the ticket data for the ticket you want to view\r\n\t// $routeParams is the way we grab data from the URL\r\n\tvm.getTicket = function(id) {\r\n\t\tTicket.get(id)\r\n\t\t\t.success(function(node) {\r\n\t\t\t\tvm.ticket = node.data;\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t})\r\n\t\t\t.error(function(err) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = err;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tvm.getTicket($routeParams.ticket_id);\r\n\t\r\n\tvm.deleteTicket = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.delete(id)\r\n\t\t\t.success(function(data) {\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\t\r\n\t\t\t\tif ( data.success) {\r\n\t\t\t\t\t$location.path('/tickets');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tvm.getEvents = function() {\r\n\t\tTicket.event.get($routeParams.ticket_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.events = node.data;\r\n\t\t\tvm.event_processing = false;\r\n\t\t})\r\n\t\t.error(function(err) {\r\n\t\t\tvm.event_processing = false;\r\n\t\t\tvm.message = err;\r\n\t\t});\r\n\t}\t\r\n\t\t\r\n\tvm.getEvents();\r\n\t\r\n\tvm.addEvent = function() {\r\n\t\tvm.event_processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\tTicket.event.create($routeParams.ticket_id, vm.eventData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.ticket.timespent += vm.eventData.timespent;\r\n\t\t\t\tvm.eventData = {};\r\n\t\t\t\t$scope.eventform.$setPristine();\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\tvm.getEvents();\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tvm.deleteEvent = function(id) {\r\n\t\tvm.event_processing = true;\r\n\t\t\r\n\t\tTicket.event.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tif ( data.success ) {\r\n\t\t\t\t\tvm.getEvents();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.getTicket($routeParams.ticket_id);\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.event_processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t}\r\n})\r\n\r\n.controller('eventEditController', function($routeParams, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.eventData = {};\r\n\r\n\tTicket.event.getOne($routeParams.event_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.eventData = node.data;\r\n\t\t});\r\n\r\n\t// function to save the event\r\n\tvm.saveEvent = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the ticketService function to update \r\n\t\tTicket.event.update(vm.eventData.id, vm.eventData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n.controller('feedbackController', function($scope, $location, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.comments = {};\r\n\tvm.processing = true;\r\n\t\r\n\tvm.getFeedback = function() {\r\n\t\tTicket.feedback.get()\r\n\t\t.success(function(node) {\r\n\t\t\tvm.comments = node.data;\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(err) {\r\n\t\t\tvm.processing = false;\r\n\t\t\tvm.message = err;\r\n\t\t});\r\n\t};\r\n\t\t\r\n\tvm.getFeedback();\r\n\t\r\n\tvm.addComment = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\t\t\r\n\t\tTicket.feedback.create(vm.feedbackData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.feedbackData = {};\r\n\t\t\t\t$scope.commentform.$setPristine();\r\n\t\t\t\tvm.getFeedback();\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n\t\r\n\tvm.deleteComment = function(id) {\r\n\t\tvm.processing = true;\r\n\t\t\r\n\t\tTicket.feedback.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tif ( data.success ) {\r\n\t\t\t\t\tvm.getFeedback();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n\r\n.controller('feedbackEditController', function($routeParams, Ticket) {\r\n\r\n\tvar vm = this;\r\n\tvm.processing = true;\r\n\tvm.feedbackData = {};\r\n\t\r\n\tTicket.feedback.getOne($routeParams.fb_id)\r\n\t\t.success(function(node) {\r\n\t\t\tvm.feedbackData = node.data;\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function(node) {\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\r\n\t// function to save the event\r\n\tvm.saveComment = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the ticketService function to update \r\n\t\tTicket.feedback.update(vm.feedbackData.id, vm.feedbackData)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t})\r\n\t\t\t.error(function(data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t});\r\n\t};\r\n})\r\n","angular.module('userCtrl', ['userService'])\r\n\r\n.controller('userController', function(User) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// set a processing variable to show loading things\r\n\tvm.processing = true;\r\n\r\n\t// grab all the users at page load\r\n\tUser.all()\r\n\t\t.success(function (node) {\r\n\r\n\t\t\tif ( node.success == false || node.data == null ) {\r\n\t\t\t\tvm.users = null;\r\n\t\t\t} else {\r\n\t\t\t\tvm.users = node.data;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.processing = false;\r\n\t\t})\r\n\t\t.error(function (node) {\r\n\t\t\tif (node) {\r\n\t\t\t\tvm.message = node;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvm.users = null;\r\n\t\t\tvm.processing = false;\r\n\t\t});\r\n\r\n\t// function to delete a user\r\n\tvm.deleteUser = function(id) {\r\n\t\tvm.processing = true;\r\n\t\tvm.users = {};\r\n\t\t\r\n\t\tUser.delete(id)\r\n\t\t\t.success(function(data) {\r\n\t\t\t\t\r\n\t\t\t\t// get all users to update the table\r\n\t\t\t\t// could also return the list of users with the delete call\r\n\t\t\t\tUser.all()\r\n\t\t\t\t\t.success(function (node) {\r\n\t\t\t\t\t\tvm.processing = false;\r\n\t\t\t\t\t\tvm.users = node.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvm.message = 'The user was successfully deleted!'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t};\r\n\r\n})\r\n\r\n// controller applied to user creation page\r\n.controller('userCreateController', function($scope, User) {\r\n\t\r\n\tvar vm = this;\r\n\tvm.type = 'create';\r\n\tvm.userData = {};\r\n\r\n\t// function to create a user\r\n\tvm.saveUser = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// use the create function in the userService\r\n\t\tUser.create(vm.userData)\r\n\t\t\t.success(function (data) {\r\n\t\t\t\tvm.processing = false;\t\t\t\t\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t\r\n\t\t\t\tif (data.success) {\r\n\t\t\t\t\tvm.userData = {};\r\n\t\t\t\t\t$scope.userform.$setPristine();\r\n\t\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t};\t\r\n\r\n})\r\n\r\n// controller applied to user edit page\r\n.controller('userEditController', function($routeParams, User) {\r\n\r\n\tvar vm = this;\r\n\tvm.type = 'edit';\r\n\t\r\n\t// get the user data for the user you want to edit\r\n\t// $routeParams is the way we grab data from the URL\r\n\tUser.get($routeParams.user_id)\r\n\t\t.success(function (node) {\r\n\t\t\tvm.userData = node.data;\r\n\t\t});\r\n\r\n\t// function to save the user\r\n\tvm.saveUser = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the userService function to update \r\n\t\tUser.update($routeParams.user_id, vm.userData)\r\n\t\t\t.success(function (data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t};\r\n\r\n})\r\n\r\n// controller applied to user edit page\r\n.controller('userProfileController', function($routeParams, User) {\r\n\r\n\tvar vm = this;\r\n\r\n\t// get the user data for the user you want to edit\r\n\t// $routeParams is the way we grab data from the URL\r\n\tUser.self()\r\n\t\t.success(function (user) {\r\n\t\t\tvm.userData = user;\r\n\t\t});\r\n\r\n\t// function to save the user\r\n\tvm.saveUser = function() {\r\n\t\tvm.processing = true;\r\n\t\tvm.message = '';\r\n\r\n\t\t// call the userService function to update \r\n\t\tUser.update(vm.userData.id, vm.userData)\r\n\t\t\t.success(function (data) {\r\n\t\t\t\tvm.processing = false;\r\n\t\t\t\tvm.message = data.message;\r\n\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, 200); \r\n\t\t\t});\r\n\t};\r\n\r\n});\r\n\r\n"],"sourceRoot":"/source/"}